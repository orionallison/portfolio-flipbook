<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Portfolio Flipbook</title>

  <!-- CSS -->
  <link rel="stylesheet" href="flipbook.css">

  <!-- jQuery (required for Turn.js) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

  <!-- Turn.js -->
  <script src="turnjs/turn.min.js"></script>
</head>

<body>

  <div id="flipbook"></div>

  <script>
    // ===========================
    // CONFIG: number of pages
    // ===========================
    const totalPages = 28;

    // ===========================
    // DYNAMIC PAGE CREATION
    // ===========================
    for (let i = 0; i < totalPages; i++) {
      const pageNumber = String(i).padStart(3, '0');
      const page = document.createElement('div');
      page.className = 'page';

      const img = document.createElement('img');
      img.src = `pages/page-${pageNumber}.png`;
      img.alt = `Page ${i + 1}`;

      page.appendChild(img);
      document.getElementById('flipbook').appendChild(page);
    }

    // ===========================
    // INITIALIZE TURN.JS
    // ===========================
    const flipbook = $('#flipbook').turn({
      width: $('#flipbook').width(),
      height: $('#flipbook').height(),
      display: 'double',
      autoCenter: false,
      gradients: true,
      acceleration: true,
      elevation: 50,
      turnCorners: 'bl,br,tl,tr', // enable click on all corners
      duration: 600
    });

    // ===========================
    // KEYBOARD NAVIGATION
    // ===========================
    function handleKeys(e) {
      switch(e.key) {
        case "ArrowLeft":
          $('#flipbook').turn('previous');
          e.preventDefault();
          break;
        case "ArrowRight":
          $('#flipbook').turn('next');
          e.preventDefault();
          break;
      }
    }

    // Focus flipbook automatically and bind keys
    $(document).ready(function() {
      $('#flipbook').attr('tabindex', 0); // allow focus
      $('#flipbook').focus();
      $('#flipbook').on('keydown', handleKeys);

      // Ensure arrow keys work even if iframe is embedded
      $(window).on('keydown', handleKeys);
    });

    // ===========================
    // RESPONSIVE RESIZE
    // ===========================
    $(window).resize(function() {
      const containerWidth = Math.min($(window).width() - 40, 1000); // max 1000px, 20px margin each side
      const pageHeight = containerWidth / 1.647; // preserve spread ratio
      $('#flipbook').turn('size', containerWidth, pageHeight);
    });
  </script>

</body>
</html>
